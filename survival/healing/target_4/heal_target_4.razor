if not timerexists 'cast recovery'
    createtimer 'cast recovery'
    settimer 'cast recovery' 1500
endif 

if not varexist 'target_4'
    overhead '[Select target 1]' 66
    @setvar! 'target_4'
    stop
    script main
endif

if findlayer 'target_4' backpack
    overhead '[Target 4]'
    if targetexists 'beneficial'
        target 'target_4'
    else
        if timer 'cast recovery' > 1500
            hotkey 'Greater Heal'
            settimer 'cast recovery' 0
            wait 1300
            target 'target_4'
            wait 150
            if targetexists 'beneficial'
                target 'target_4'
            endif
            if insysmsg 'That is too far away'
                overhead '[Target Too Far!]' 33
            endif
        endif
    endif
else
    overhead '[Target Not On Screen]' 33
    if not targetexists 'any'
        overhead '[Precasting]' 55
        hotkey 'Greater Heal'
        settimer 'cast recovery' 0
        wait 1300
    endif
endif
script main