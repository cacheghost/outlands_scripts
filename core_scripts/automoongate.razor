# Handle player blue moongates
if findtype 3948 'ground' 0 1 2 as 'bluegate'
    dclick 'bluegate'
    waitforgump 3899019871
    gumpresponse 2 3899019871
    gumpclose 3899019871
endif 

# Handle red moongates
if findtype 3948 'ground' 2820 1 2 as 'redmoongate'
    # Goto Corpse Creek
    dclick 'redmoongate'
    waitforgump 3773199800
    gumpresponse 17 3773199800
    waitforgump 3773199800
    gumpresponse 2 3773199800
    gumpclose 3773199800
endif

# Handle blue moongates
if findtype 3948 'ground' 2821 1 2 as 'bluemoongate'
    # Goto Corpse Creek
    dclick 'bluemoongate'
    waitforgump 3773199800
    gumpresponse 18 3773199800
    waitforgump 3773199800
    gumpresponse 2 3773199800
    gumpclose 3773199800
endif

# Handle yellow moongates
if findtype 3948 'ground' 2822 1 2 as 'yellowmoongate'
    # Goto Corpse Creek
    dclick 'yellowmoongate'
    waitforgump 3773199800
    gumpresponse 17 3773199800
    waitforgump 3773199800
    gumpresponse 2 3773199800
    gumpclose 3773199800
endif

# Handle ghost moongates
if findtype 3948 'ground' 2825 1 2 as 'factionmoongate'
    # Goto Dungeon
    dclick 'factionmoongate'
    if gumpexists 870750234
        waitforgump 870750234
        gumpresponse 2 870750234
        waitforgump 870750234
        gumpresponse 2 870750234
        gumpclose 870750234
    endif
    if gumpexists 3773199800
        waitforgump 3773199800
        gumpresponse 2 3773199800
        waitforgump 3773199800
        gumpresponse 2 3773199800
        gumpclose 3773199800
    endif
endif

# Handle faction moongates
if findtype 3948 'ground' 2827 1 2 as 'factionmoongate'
    # Goto Dungeon
    dclick 'factionmoongate'
    waitforgump 3773199800
    gumpresponse 2 3773199800
    gumpclose 3773199800
endif

# Handle gray moongates
if findtype 8148 'ground' -1 1 2 as 'graymoongate'
    # Confirm
    dclick 'graymoongate'
    waitforgump 3899019871
    gumpresponse 2 3899019871
    gumpclose 3899019871
endif

# Handle omni moongates
if findtype 27754 'ground' -1 1 2 as 'omnimoongate'
    # Confirm
    dclick 'omnimoongate'
    waitforgump 3773199800
    gumpresponse 17 3773199800
    waitforgump 3773199800
    gumpresponse 2 3773199800
    gumpclose 3773199800
endif
#script chainloop